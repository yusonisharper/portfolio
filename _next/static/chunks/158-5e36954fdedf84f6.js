(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[158],{1551:function(e,t,r){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,s=[],o=!0,a=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(s.push(n.value),!t||s.length!==t);o=!0);}catch(l){a=!0,i=l}finally{try{o||null==r.return||r.return()}finally{if(a)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,o=(s=r(7294))&&s.__esModule?s:{default:s},a=r(1003),l=r(880),c=r(9246);function u(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var h={};function p(e,t,r,n){if(e&&a.isLocalURL(t)){e.prefetch(t,r,n).catch((function(e){0}));var i=n&&"undefined"!==typeof n.locale?n.locale:e&&e.locale;h[t+"%"+r+(i?"%"+i:"")]=!0}}var f=o.default.forwardRef((function(e,t){var r,n=e.legacyBehavior,s=void 0===n?!0!==Boolean(!1):n,f=e.href,d=e.as,m=e.children,v=e.prefetch,g=e.passHref,y=e.replace,w=e.shallow,b=e.scroll,_=e.locale,x=e.onClick,I=e.onMouseEnter,T=u(e,["href","as","children","prefetch","passHref","replace","shallow","scroll","locale","onClick","onMouseEnter"]);r=m,s&&"string"===typeof r&&(r=o.default.createElement("a",null,r));var S,E=!1!==v,C=l.useRouter(),P=o.default.useMemo((function(){var e=i(a.resolveHref(C,f,!0),2),t=e[0],r=e[1];return{href:t,as:d?a.resolveHref(C,d):r||t}}),[C,f,d]),D=P.href,A=P.as,M=o.default.useRef(D),R=o.default.useRef(A);s&&(S=o.default.Children.only(r));var k=s?S&&"object"===typeof S&&S.ref:t,L=i(c.useIntersection({rootMargin:"200px"}),3),F=L[0],O=L[1],N=L[2],U=o.default.useCallback((function(e){R.current===A&&M.current===D||(N(),R.current=A,M.current=D),F(e),k&&("function"===typeof k?k(e):"object"===typeof k&&(k.current=e))}),[A,k,D,N,F]);o.default.useEffect((function(){var e=O&&E&&a.isLocalURL(D),t="undefined"!==typeof _?_:C&&C.locale,r=h[D+"%"+A+(t?"%"+t:"")];e&&!r&&p(C,D,A,{locale:t})}),[A,D,O,_,E,C]);var j={ref:U,onClick:function(e){s||"function"!==typeof x||x(e),s&&S.props&&"function"===typeof S.props.onClick&&S.props.onClick(e),e.defaultPrevented||function(e,t,r,n,i,s,o,l){("A"!==e.currentTarget.nodeName.toUpperCase()||!function(e){var t=e.currentTarget.target;return t&&"_self"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)&&a.isLocalURL(r))&&(e.preventDefault(),t[i?"replace":"push"](r,n,{shallow:s,locale:l,scroll:o}))}(e,C,D,A,y,w,b,_)},onMouseEnter:function(e){s||"function"!==typeof I||I(e),s&&S.props&&"function"===typeof S.props.onMouseEnter&&S.props.onMouseEnter(e),a.isLocalURL(D)&&p(C,D,A,{priority:!0})}};if(!s||g||"a"===S.type&&!("href"in S.props)){var B="undefined"!==typeof _?_:C&&C.locale,z=C&&C.isLocaleDomain&&a.getDomainLocale(A,B,C&&C.locales,C&&C.domainLocales);j.href=z||a.addBasePath(a.addLocale(A,B,C&&C.defaultLocale))}return s?o.default.cloneElement(S,j):o.default.createElement("a",Object.assign({},T,j),r)}));t.default=f,("function"===typeof t.default||"object"===typeof t.default&&null!==t.default)&&(Object.assign(t.default,t),e.exports=t.default)},9246:function(e,t,r){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,s=[],o=!0,a=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(s.push(n.value),!t||s.length!==t);o=!0);}catch(l){a=!0,i=l}finally{try{o||null==r.return||r.return()}finally{if(a)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}Object.defineProperty(t,"__esModule",{value:!0}),t.useIntersection=function(e){var t=e.rootRef,r=e.rootMargin,n=e.disabled||!a,u=s.useRef(),h=i(s.useState(!1),2),p=h[0],f=h[1],d=i(s.useState(t?t.current:null),2),m=d[0],v=d[1],g=s.useCallback((function(e){u.current&&(u.current(),u.current=void 0),n||p||e&&e.tagName&&(u.current=function(e,t,r){var n=function(e){var t,r={root:e.root||null,margin:e.rootMargin||""},n=c.find((function(e){return e.root===r.root&&e.margin===r.margin}));n?t=l.get(n):(t=l.get(r),c.push(r));if(t)return t;var i=new Map,s=new IntersectionObserver((function(e){e.forEach((function(e){var t=i.get(e.target),r=e.isIntersecting||e.intersectionRatio>0;t&&r&&t(r)}))}),e);return l.set(r,t={id:r,observer:s,elements:i}),t}(r),i=n.id,s=n.observer,o=n.elements;return o.set(e,t),s.observe(e),function(){if(o.delete(e),s.unobserve(e),0===o.size){s.disconnect(),l.delete(i);var t=c.findIndex((function(e){return e.root===i.root&&e.margin===i.margin}));t>-1&&c.splice(t,1)}}}(e,(function(e){return e&&f(e)}),{root:m,rootMargin:r}))}),[n,m,r,p]),y=s.useCallback((function(){f(!1)}),[]);return s.useEffect((function(){if(!a&&!p){var e=o.requestIdleCallback((function(){return f(!0)}));return function(){return o.cancelIdleCallback(e)}}}),[p]),s.useEffect((function(){t&&v(t.current)}),[t]),[g,p,y]};var s=r(7294),o=r(4686),a="undefined"!==typeof IntersectionObserver;var l=new Map,c=[];("function"===typeof t.default||"object"===typeof t.default&&null!==t.default)&&(Object.assign(t.default,t),e.exports=t.default)},9008:function(e,t,r){e.exports=r(3121)},1664:function(e,t,r){e.exports=r(1551)},8250:function(e,t,r){"use strict";r.d(t,{ZP:function(){return g}});var n=Object.freeze({Linear:Object.freeze({None:function(e){return e},In:function(e){return e},Out:function(e){return e},InOut:function(e){return e}}),Quadratic:Object.freeze({In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}}),Cubic:Object.freeze({In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}}),Quartic:Object.freeze({In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}}),Quintic:Object.freeze({In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}}),Sinusoidal:Object.freeze({In:function(e){return 1-Math.sin((1-e)*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.sin(Math.PI*(.5-e)))}}),Exponential:Object.freeze({In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}}),Circular:Object.freeze({In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}}),Elastic:Object.freeze({In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1}}),Back:Object.freeze({In:function(e){var t=1.70158;return 1===e?1:e*e*((t+1)*e-t)},Out:function(e){var t=1.70158;return 0===e?0:--e*e*((t+1)*e+t)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}}),Bounce:Object.freeze({In:function(e){return 1-n.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*n.Bounce.In(2*e):.5*n.Bounce.Out(2*e-1)+.5}}),generatePow:function(e){return void 0===e&&(e=4),e=(e=e<Number.EPSILON?Number.EPSILON:e)>1e4?1e4:e,{In:function(t){return Math.pow(t,e)},Out:function(t){return 1-Math.pow(1-t,e)},InOut:function(t){return t<.5?Math.pow(2*t,e)/2:(1-Math.pow(2-2*t,e))/2+.5}}}}),i=function(){return performance.now()},s=function(){function e(){this._tweens={},this._tweensAddedDuringUpdate={}}return e.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map((function(t){return e._tweens[t]}))},e.prototype.removeAll=function(){this._tweens={}},e.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},e.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},e.prototype.update=function(e,t){void 0===e&&(e=i()),void 0===t&&(t=!1);var r=Object.keys(this._tweens);if(0===r.length)return!1;for(;r.length>0;){this._tweensAddedDuringUpdate={};for(var n=0;n<r.length;n++){var s=this._tweens[r[n]],o=!t;s&&!1===s.update(e,o)&&!t&&delete this._tweens[r[n]]}r=Object.keys(this._tweensAddedDuringUpdate)}return!0},e}(),o={Linear:function(e,t){var r=e.length-1,n=r*t,i=Math.floor(n),s=o.Utils.Linear;return t<0?s(e[0],e[1],n):t>1?s(e[r],e[r-1],r-n):s(e[i],e[i+1>r?r:i+1],n-i)},Bezier:function(e,t){for(var r=0,n=e.length-1,i=Math.pow,s=o.Utils.Bernstein,a=0;a<=n;a++)r+=i(1-t,n-a)*i(t,a)*e[a]*s(n,a);return r},CatmullRom:function(e,t){var r=e.length-1,n=r*t,i=Math.floor(n),s=o.Utils.CatmullRom;return e[0]===e[r]?(t<0&&(i=Math.floor(n=r*(1+t))),s(e[(i-1+r)%r],e[i],e[(i+1)%r],e[(i+2)%r],n-i)):t<0?e[0]-(s(e[0],e[0],e[1],e[1],-n)-e[0]):t>1?e[r]-(s(e[r],e[r],e[r-1],e[r-1],n-r)-e[r]):s(e[i?i-1:0],e[i],e[r<i+1?r:i+1],e[r<i+2?r:i+2],n-i)},Utils:{Linear:function(e,t,r){return(t-e)*r+e},Bernstein:function(e,t){var r=o.Utils.Factorial;return r(e)/r(t)/r(e-t)},Factorial:function(){var e=[1];return function(t){var r=1;if(e[t])return e[t];for(var n=t;n>1;n--)r*=n;return e[t]=r,r}}(),CatmullRom:function(e,t,r,n,i){var s=.5*(r-e),o=.5*(n-t),a=i*i;return(2*t-2*r+s+o)*(i*a)+(-3*t+3*r-2*s-o)*a+s*i+t}}},a=function(){function e(){}return e.nextId=function(){return e._nextId++},e._nextId=0,e}(),l=new s,c=function(){function e(e,t){void 0===t&&(t=l),this._object=e,this._group=t,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=n.Linear.None,this._interpolationFunction=o.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=a.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1}return e.prototype.getId=function(){return this._id},e.prototype.isPlaying=function(){return this._isPlaying},e.prototype.isPaused=function(){return this._isPaused},e.prototype.getDuration=function(){return this._duration},e.prototype.to=function(e,t){if(void 0===t&&(t=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=t<0?0:t,this},e.prototype.duration=function(e){return void 0===e&&(e=1e3),this._duration=e<0?0:e,this},e.prototype.dynamic=function(e){return void 0===e&&(e=!1),this._isDynamic=e,this},e.prototype.start=function(e,t){if(void 0===e&&(e=i()),void 0===t&&(t=!1),this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed)for(var r in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(r),this._valuesStart[r]=this._valuesStartRepeat[r];if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||t){if(this._propertiesAreSetUp=!0,!this._isDynamic){var n={};for(var s in this._valuesEnd)n[s]=this._valuesEnd[s];this._valuesEnd=n}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,t)}return this},e.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},e.prototype._setupProperties=function(e,t,r,n,i){for(var s in r){var o=e[s],a=Array.isArray(o),l=a?"array":typeof o,c=!a&&Array.isArray(r[s]);if("undefined"!==l&&"function"!==l){if(c){if(0===(v=r[s]).length)continue;for(var u=[o],h=0,p=v.length;h<p;h+=1){var f=this._handleRelativeValue(o,v[h]);if(isNaN(f)){c=!1,console.warn("Found invalid interpolation list. Skipping.");break}u.push(f)}c&&(r[s]=u)}if("object"!==l&&!a||!o||c)("undefined"===typeof t[s]||i)&&(t[s]=o),a||(t[s]*=1),n[s]=c?r[s].slice().reverse():t[s]||0;else{t[s]=a?[]:{};var d=o;for(var m in d)t[s][m]=d[m];n[s]=a?[]:{};var v=r[s];if(!this._isDynamic){var g={};for(var m in v)g[m]=v[m];r[s]=v=g}this._setupProperties(d,t[s],v,n[s],i)}}}},e.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},e.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},e.prototype.pause=function(e){return void 0===e&&(e=i()),this._isPaused||!this._isPlaying||(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this)),this},e.prototype.resume=function(e){return void 0===e&&(e=i()),this._isPaused&&this._isPlaying?(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this):this},e.prototype.stopChainedTweens=function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop();return this},e.prototype.group=function(e){return void 0===e&&(e=l),this._group=e,this},e.prototype.delay=function(e){return void 0===e&&(e=0),this._delayTime=e,this},e.prototype.repeat=function(e){return void 0===e&&(e=0),this._initialRepeat=e,this._repeat=e,this},e.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},e.prototype.yoyo=function(e){return void 0===e&&(e=!1),this._yoyo=e,this},e.prototype.easing=function(e){return void 0===e&&(e=n.Linear.None),this._easingFunction=e,this},e.prototype.interpolation=function(e){return void 0===e&&(e=o.Linear),this._interpolationFunction=e,this},e.prototype.chain=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._chainedTweens=e,this},e.prototype.onStart=function(e){return this._onStartCallback=e,this},e.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},e.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},e.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},e.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},e.prototype.onStop=function(e){return this._onStopCallback=e,this},e.prototype.update=function(e,t){var r;if(void 0===e&&(e=i()),void 0===t&&(t=!0),this._isPaused)return!0;var n=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(e>n)return!1;t&&this.start(e,!0)}if(this._goToEnd=!1,e<this._startTime)return!0;!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),!1===this._onEveryStartCallbackFired&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var s=e-this._startTime,o=this._duration+(null!==(r=this._repeatDelayTime)&&void 0!==r?r:this._delayTime),a=this._duration+this._repeat*o,l=this._calculateElapsedPortion(s,o,a),c=this._easingFunction(l),u=this._calculateCompletionStatus(s,o);if("repeat"===u&&this._processRepetition(s,o),this._updateProperties(this._object,this._valuesStart,this._valuesEnd,c),"about-to-repeat"===u&&this._processRepetition(s,o),this._onUpdateCallback&&this._onUpdateCallback(this._object,l),"repeat"===u||"about-to-repeat"===u)this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1;else if("completed"===u){this._isPlaying=!1,this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var h=0,p=this._chainedTweens.length;h<p;h++)this._chainedTweens[h].start(this._startTime+this._duration,!1)}return"completed"!==u},e.prototype._calculateElapsedPortion=function(e,t,r){if(0===this._duration||e>r)return 1;var n=e%t,i=Math.min(n/this._duration,1);return 0===i&&0!==e&&e%this._duration===0?1:i},e.prototype._calculateCompletionStatus=function(e,t){return 0!==this._duration&&e<this._duration?"playing":this._repeat<=0?"completed":e===this._duration?"about-to-repeat":"repeat"},e.prototype._processRepetition=function(e,t){var r=Math.min(Math.trunc((e-this._duration)/t)+1,this._repeat);for(var n in isFinite(this._repeat)&&(this._repeat-=r),this._valuesStartRepeat){var i=this._valuesEnd[n];this._yoyo||"string"!==typeof i||(this._valuesStartRepeat[n]=this._valuesStartRepeat[n]+parseFloat(i)),this._yoyo&&this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n]}this._yoyo&&(this._reversed=!this._reversed),this._startTime+=t*r},e.prototype._updateProperties=function(e,t,r,n){for(var i in r)if(void 0!==t[i]){var s=t[i]||0,o=r[i],a=Array.isArray(e[i]),l=Array.isArray(o);!a&&l?e[i]=this._interpolationFunction(o,n):"object"===typeof o&&o?this._updateProperties(e[i],s,o,n):"number"===typeof(o=this._handleRelativeValue(s,o))&&(e[i]=s+(o-s)*n)}},e.prototype._handleRelativeValue=function(e,t){return"string"!==typeof t?t:"+"===t.charAt(0)||"-"===t.charAt(0)?e+parseFloat(t):parseFloat(t)},e.prototype._swapEndStartRepeatValues=function(e){var t=this._valuesStartRepeat[e],r=this._valuesEnd[e];this._valuesStartRepeat[e]="string"===typeof r?this._valuesStartRepeat[e]+parseFloat(r):this._valuesEnd[e],this._valuesEnd[e]=t},e}(),u=a.nextId,h=l,p=h.getAll.bind(h),f=h.removeAll.bind(h),d=h.add.bind(h),m=h.remove.bind(h),v=h.update.bind(h),g={Easing:n,Group:s,Interpolation:o,now:i,Sequence:a,nextId:u,Tween:c,VERSION:"23.1.2",getAll:p,removeAll:f,add:d,remove:m,update:v}},1411:function(e,t,r){"use strict";r.d(t,{y:function(){return X}});var n=r(9477),i=Uint8Array,s=Uint16Array,o=Int32Array,a=new i([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),l=new i([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),c=new i([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),u=function(e,t){for(var r=new s(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];var i=new o(r[30]);for(n=1;n<30;++n)for(var a=r[n];a<r[n+1];++a)i[a]=a-r[n]<<5|n;return{b:r,r:i}},h=u(a,2),p=h.b,f=h.r;p[28]=258,f[258]=28;for(var d=u(l,0),m=d.b,v=(d.r,new s(32768)),g=0;g<32768;++g){var y=(43690&g)>>1|(21845&g)<<1;y=(61680&(y=(52428&y)>>2|(13107&y)<<2))>>4|(3855&y)<<4,v[g]=((65280&y)>>8|(255&y)<<8)>>1}var w=function(e,t,r){for(var n=e.length,i=0,o=new s(t);i<n;++i)e[i]&&++o[e[i]-1];var a,l=new s(t);for(i=1;i<t;++i)l[i]=l[i-1]+o[i-1]<<1;if(r){a=new s(1<<t);var c=15-t;for(i=0;i<n;++i)if(e[i])for(var u=i<<4|e[i],h=t-e[i],p=l[e[i]-1]++<<h,f=p|(1<<h)-1;p<=f;++p)a[v[p]>>c]=u}else for(a=new s(n),i=0;i<n;++i)e[i]&&(a[i]=v[l[e[i]-1]++]>>15-e[i]);return a},b=new i(288);for(g=0;g<144;++g)b[g]=8;for(g=144;g<256;++g)b[g]=9;for(g=256;g<280;++g)b[g]=7;for(g=280;g<288;++g)b[g]=8;var _=new i(32);for(g=0;g<32;++g)_[g]=5;var x=w(b,9,1),I=w(_,5,1),T=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},S=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(7&t)&r},E=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(7&t)},C=function(e){return(e+7)/8|0},P=function(e,t,r){return(null==t||t<0)&&(t=0),(null==r||r>e.length)&&(r=e.length),new i(e.subarray(t,r))},D=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],A=function(e,t,r){var n=new Error(t||D[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,A),!r)throw n;return n},M=function(e,t,r,n){var s=e.length,o=n?n.length:0;if(!s||t.f&&!t.l)return r||new i(0);var u=!r,h=u||2!=t.i,f=t.i;u&&(r=new i(3*s));var d=function(e){var t=r.length;if(e>t){var n=new i(Math.max(2*t,e));n.set(r),r=n}},v=t.f||0,g=t.p||0,y=t.b||0,b=t.l,_=t.d,D=t.m,M=t.n,R=8*s;do{if(!b){v=S(e,g,1);var k=S(e,g+1,3);if(g+=3,!k){var L=e[(H=C(g)+4)-4]|e[H-3]<<8,F=H+L;if(F>s){f&&A(0);break}h&&d(y+L),r.set(e.subarray(H,F),y),t.b=y+=L,t.p=g=8*F,t.f=v;continue}if(1==k)b=x,_=I,D=9,M=5;else if(2==k){var O=S(e,g,31)+257,N=S(e,g+10,15)+4,U=O+S(e,g+5,31)+1;g+=14;for(var j=new i(U),B=new i(19),z=0;z<N;++z)B[c[z]]=S(e,g+3*z,7);g+=3*N;var V=T(B),G=(1<<V)-1,X=w(B,V,1);for(z=0;z<U;){var H,K=X[S(e,g,G)];if(g+=15&K,(H=K>>4)<16)j[z++]=H;else{var W=0,Y=0;for(16==H?(Y=3+S(e,g,3),g+=2,W=j[z-1]):17==H?(Y=3+S(e,g,7),g+=3):18==H&&(Y=11+S(e,g,127),g+=7);Y--;)j[z++]=W}}var $=j.subarray(0,O),Z=j.subarray(O);D=T($),M=T(Z),b=w($,D,1),_=w(Z,M,1)}else A(1);if(g>R){f&&A(0);break}}h&&d(y+131072);for(var Q=(1<<D)-1,q=(1<<M)-1,J=g;;J=g){var ee=(W=b[E(e,g)&Q])>>4;if((g+=15&W)>R){f&&A(0);break}if(W||A(2),ee<256)r[y++]=ee;else{if(256==ee){J=g,b=null;break}var te=ee-254;if(ee>264){var re=a[z=ee-257];te=S(e,g,(1<<re)-1)+p[z],g+=re}var ne=_[E(e,g)&q],ie=ne>>4;ne||A(3),g+=15&ne;Z=m[ie];if(ie>3){re=l[ie];Z+=E(e,g)&(1<<re)-1,g+=re}if(g>R){f&&A(0);break}h&&d(y+131072);var se=y+te;if(y<Z){var oe=o-Z,ae=Math.min(Z,se);for(oe+y<0&&A(3);y<ae;++y)r[y]=n[oe+y]}for(;y<se;++y)r[y]=r[y-Z]}}t.l=b,t.p=J,t.b=y,t.f=v,b&&(v=1,t.m=D,t.d=_,t.n=M)}while(!v);return y!=r.length&&u?P(r,0,y):r.subarray(0,y)},R=new i(0),k=function(e,t){return(8!=(15&e[0])||e[0]>>4>7||(e[0]<<8|e[1])%31)&&A(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&A(6,"invalid zlib data: "+(32&e[1]?"need":"unexpected")+" dictionary"),2+(e[1]>>3&4)};function L(e,t){return M(e.subarray(k(e,t&&t.dictionary),-4),{i:2},t&&t.out,t&&t.dictionary)}var F="undefined"!=typeof TextDecoder&&new TextDecoder;try{F.decode(R,{stream:!0}),1}catch(le){}"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;function O(e,t,r){const n=r.length-e-1;if(t>=r[n])return n-1;if(t<=r[e])return e;let i=e,s=n,o=Math.floor((i+s)/2);for(;t<r[o]||t>=r[o+1];)t<r[o]?s=o:i=o,o=Math.floor((i+s)/2);return o}function N(e,t,r,n){const i=[],s=[],o=[];i[0]=1;for(let a=1;a<=r;++a){s[a]=t-n[e+1-a],o[a]=n[e+a]-t;let r=0;for(let e=0;e<a;++e){const t=o[e+1],n=s[a-e],l=i[e]/(t+n);i[e]=r+t*l,r=n*l}i[a]=r}return i}function U(e,t){let r=1;for(let i=2;i<=e;++i)r*=i;let n=1;for(let i=2;i<=t;++i)n*=i;for(let i=2;i<=e-t;++i)n*=i;return r/n}function j(e,t,r,i,s){const o=function(e,t,r,i,s){const o=s<e?s:e,a=[],l=O(e,i,t),c=function(e,t,r,n,i){const s=[];for(let h=0;h<=r;++h)s[h]=0;const o=[];for(let h=0;h<=n;++h)o[h]=s.slice(0);const a=[];for(let h=0;h<=r;++h)a[h]=s.slice(0);a[0][0]=1;const l=s.slice(0),c=s.slice(0);for(let h=1;h<=r;++h){l[h]=t-i[e+1-h],c[h]=i[e+h]-t;let r=0;for(let e=0;e<h;++e){const t=c[e+1],n=l[h-e];a[h][e]=t+n;const i=a[e][h-1]/a[h][e];a[e][h]=r+t*i,r=n*i}a[h][h]=r}for(let h=0;h<=r;++h)o[0][h]=a[h][r];for(let h=0;h<=r;++h){let e=0,t=1;const i=[];for(let n=0;n<=r;++n)i[n]=s.slice(0);i[0][0]=1;for(let s=1;s<=n;++s){let n=0;const l=h-s,c=r-s;h>=s&&(i[t][0]=i[e][0]/a[c+1][l],n=i[t][0]*a[l][c]);const u=h-1<=c?s-1:r-h;for(let r=l>=-1?1:-l;r<=u;++r)i[t][r]=(i[e][r]-i[e][r-1])/a[c+1][l+r],n+=i[t][r]*a[l+r][c];h<=c&&(i[t][s]=-i[e][s-1]/a[c+1][h],n+=i[t][s]*a[h][c]),o[s][h]=n;const p=e;e=t,t=p}}let u=r;for(let h=1;h<=n;++h){for(let e=0;e<=r;++e)o[h][e]*=u;u*=r-h}return o}(l,i,e,o,t),u=[];for(let n=0;n<r.length;++n){const e=r[n].clone(),t=e.w;e.x*=t,e.y*=t,e.z*=t,u[n]=e}for(let n=0;n<=o;++n){const t=u[l-e].clone().multiplyScalar(c[n][0]);for(let r=1;r<=e;++r)t.add(u[l-e+r].clone().multiplyScalar(c[n][r]));a[n]=t}for(let h=o+1;h<=s+1;++h)a[h]=new n.Ltg(0,0,0);return a}(e,t,r,i,s);return function(e){const t=e.length,r=[],i=[];for(let o=0;o<t;++o){const t=e[o];r[o]=new n.Pa4(t.x,t.y,t.z),i[o]=t.w}const s=[];for(let n=0;n<t;++n){const e=r[n].clone();for(let t=1;t<=n;++t)e.sub(s[n-t].clone().multiplyScalar(U(n,t)*i[t]));s[n]=e.divideScalar(i[0])}return s}(o)}class B extends n.Hyl{constructor(e,t,r,i,s){super(),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=i||0,this.endKnot=s||this.knots.length-1;for(let o=0;o<r.length;++o){const e=r[o];this.controlPoints[o]=new n.Ltg(e.x,e.y,e.z,e.w)}}getPoint(e,t=new n.Pa4){const r=t,i=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),s=function(e,t,r,i){const s=O(e,i,t),o=N(s,i,e,t),a=new n.Ltg(0,0,0,0);for(let n=0;n<=e;++n){const t=r[s-e+n],i=o[n],l=t.w*i;a.x+=t.x*l,a.y+=t.y*l,a.z+=t.z*l,a.w+=t.w*i}return a}(this.degree,this.knots,this.controlPoints,i);return 1!==s.w&&s.divideScalar(s.w),r.set(s.x,s.y,s.z)}getTangent(e,t=new n.Pa4){const r=t,i=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),s=j(this.degree,this.knots,this.controlPoints,i,1);return r.copy(s[1]).normalize(),r}}let z,V,G;class X extends n.aNw{constructor(e){super(e)}load(e,t,r,i){const s=this,o=""===s.path?n.Zp0.extractUrlBase(e):s.path,a=new n.hH6(this.manager);a.setPath(s.path),a.setResponseType("arraybuffer"),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,(function(r){try{t(s.parse(r,o))}catch(le){i?i(le):console.error(le),s.manager.itemError(e)}}),r,i)}parse(e,t){if(function(e){const t="Kaydara FBX Binary  \0";return e.byteLength>=t.length&&t===ae(e,0,t.length)}(e))z=(new $).parse(e);else{const t=ae(e);if(!function(e){const t=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let r=0;function n(t){const n=e[t-1];return e=e.slice(r+t),r++,n}for(let i=0;i<t.length;++i){if(n(1)===t[i])return!1}return!0}(t))throw new Error("THREE.FBXLoader: Unknown format.");if(q(t)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+q(t));z=(new Y).parse(t)}const r=new n.dpR(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new H(r,this.manager).parse(z)}}class H{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){V=this.parseConnections();const e=this.parseImages(),t=this.parseTextures(e),r=this.parseMaterials(t),n=this.parseDeformers(),i=(new K).parse(n);return this.parseScene(n,i,r),G}parseConnections(){const e=new Map;if("Connections"in z){z.Connections.connections.forEach((function(t){const r=t[0],n=t[1],i=t[2];e.has(r)||e.set(r,{parents:[],children:[]});const s={ID:n,relationship:i};e.get(r).parents.push(s),e.has(n)||e.set(n,{parents:[],children:[]});const o={ID:r,relationship:i};e.get(n).children.push(o)}))}return e}parseImages(){const e={},t={};if("Video"in z.Objects){const r=z.Objects.Video;for(const n in r){const i=r[n];if(e[parseInt(n)]=i.RelativeFilename||i.Filename,"Content"in i){const e=i.Content instanceof ArrayBuffer&&i.Content.byteLength>0,s="string"===typeof i.Content&&""!==i.Content;if(e||s){const e=this.parseImage(r[n]);t[i.RelativeFilename||i.Filename]=e}}}}for(const r in e){const n=e[r];void 0!==t[n]?e[r]=t[n]:e[r]=e[r].split("\\").pop()}return e}parseImage(e){const t=e.Content,r=e.RelativeFilename||e.Filename,n=r.slice(r.lastIndexOf(".")+1).toLowerCase();let i;switch(n){case"bmp":i="image/bmp";break;case"jpg":case"jpeg":i="image/jpeg";break;case"png":i="image/png";break;case"tif":i="image/tiff";break;case"tga":null===this.manager.getHandler(".tga")&&console.warn("FBXLoader: TGA loader not found, skipping ",r),i="image/tga";break;default:return void console.warn('FBXLoader: Image type "'+n+'" is not supported.')}if("string"===typeof t)return"data:"+i+";base64,"+t;{const e=new Uint8Array(t);return window.URL.createObjectURL(new Blob([e],{type:i}))}}parseTextures(e){const t=new Map;if("Texture"in z.Objects){const r=z.Objects.Texture;for(const n in r){const i=this.parseTexture(r[n],e);t.set(parseInt(n),i)}}return t}parseTexture(e,t){const r=this.loadTexture(e,t);r.ID=e.id,r.name=e.attrName;const i=e.WrapModeU,s=e.WrapModeV,o=void 0!==i?i.value:0,a=void 0!==s?s.value:0;if(r.wrapS=0===o?n.rpg:n.uWy,r.wrapT=0===a?n.rpg:n.uWy,"Scaling"in e){const t=e.Scaling.value;r.repeat.x=t[0],r.repeat.y=t[1]}if("Translation"in e){const t=e.Translation.value;r.offset.x=t[0],r.offset.y=t[1]}return r}loadTexture(e,t){let r;const i=this.textureLoader.path,s=V.get(e.id).children;let o;void 0!==s&&s.length>0&&void 0!==t[s[0].ID]&&(r=t[s[0].ID],0!==r.indexOf("blob:")&&0!==r.indexOf("data:")||this.textureLoader.setPath(void 0));const a=e.FileName.slice(-3).toLowerCase();if("tga"===a){const t=this.manager.getHandler(".tga");null===t?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),o=new n.xEZ):(t.setPath(this.textureLoader.path),o=t.load(r))}else if("dds"===a){const t=this.manager.getHandler(".dds");null===t?(console.warn("FBXLoader: DDS loader not found, creating placeholder texture for",e.RelativeFilename),o=new n.xEZ):(t.setPath(this.textureLoader.path),o=t.load(r))}else"psd"===a?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),o=new n.xEZ):o=this.textureLoader.load(r);return this.textureLoader.setPath(i),o}parseMaterials(e){const t=new Map;if("Material"in z.Objects){const r=z.Objects.Material;for(const n in r){const i=this.parseMaterial(r[n],e);null!==i&&t.set(parseInt(n),i)}}return t}parseMaterial(e,t){const r=e.id,i=e.attrName;let s=e.ShadingModel;if("object"===typeof s&&(s=s.value),!V.has(r))return null;const o=this.parseParameters(e,t,r);let a;switch(s.toLowerCase()){case"phong":a=new n.xoR;break;case"lambert":a=new n.YBo;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',s),a=new n.xoR}return a.setValues(o),a.name=i,a}parseParameters(e,t,r){const i={};e.BumpFactor&&(i.bumpScale=e.BumpFactor.value),e.Diffuse?i.color=(new n.Ilk).fromArray(e.Diffuse.value).convertSRGBToLinear():!e.DiffuseColor||"Color"!==e.DiffuseColor.type&&"ColorRGB"!==e.DiffuseColor.type||(i.color=(new n.Ilk).fromArray(e.DiffuseColor.value).convertSRGBToLinear()),e.DisplacementFactor&&(i.displacementScale=e.DisplacementFactor.value),e.Emissive?i.emissive=(new n.Ilk).fromArray(e.Emissive.value).convertSRGBToLinear():!e.EmissiveColor||"Color"!==e.EmissiveColor.type&&"ColorRGB"!==e.EmissiveColor.type||(i.emissive=(new n.Ilk).fromArray(e.EmissiveColor.value).convertSRGBToLinear()),e.EmissiveFactor&&(i.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(i.opacity=parseFloat(e.Opacity.value)),i.opacity<1&&(i.transparent=!0),e.ReflectionFactor&&(i.reflectivity=e.ReflectionFactor.value),e.Shininess&&(i.shininess=e.Shininess.value),e.Specular?i.specular=(new n.Ilk).fromArray(e.Specular.value).convertSRGBToLinear():e.SpecularColor&&"Color"===e.SpecularColor.type&&(i.specular=(new n.Ilk).fromArray(e.SpecularColor.value).convertSRGBToLinear());const s=this;return V.get(r).children.forEach((function(e){const r=e.relationship;switch(r){case"Bump":i.bumpMap=s.getTexture(t,e.ID);break;case"Maya|TEX_ao_map":i.aoMap=s.getTexture(t,e.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":i.map=s.getTexture(t,e.ID),void 0!==i.map&&(i.map.colorSpace=n.KI_);break;case"DisplacementColor":i.displacementMap=s.getTexture(t,e.ID);break;case"EmissiveColor":i.emissiveMap=s.getTexture(t,e.ID),void 0!==i.emissiveMap&&(i.emissiveMap.colorSpace=n.KI_);break;case"NormalMap":case"Maya|TEX_normal_map":i.normalMap=s.getTexture(t,e.ID);break;case"ReflectionColor":i.envMap=s.getTexture(t,e.ID),void 0!==i.envMap&&(i.envMap.mapping=n.dSO,i.envMap.colorSpace=n.KI_);break;case"SpecularColor":i.specularMap=s.getTexture(t,e.ID),void 0!==i.specularMap&&(i.specularMap.colorSpace=n.KI_);break;case"TransparentColor":case"TransparencyFactor":i.alphaMap=s.getTexture(t,e.ID),i.transparent=!0;break;default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",r)}})),i}getTexture(e,t){return"LayeredTexture"in z.Objects&&t in z.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=V.get(t).children[0].ID),e.get(t)}parseDeformers(){const e={},t={};if("Deformer"in z.Objects){const r=z.Objects.Deformer;for(const n in r){const i=r[n],s=V.get(parseInt(n));if("Skin"===i.attrType){const t=this.parseSkeleton(s,r);t.ID=n,s.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),t.geometryID=s.parents[0].ID,e[n]=t}else if("BlendShape"===i.attrType){const e={id:n};e.rawTargets=this.parseMorphTargets(s,r),e.id=n,s.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[n]=e}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){const r=[];return e.children.forEach((function(e){const i=t[e.ID];if("Cluster"!==i.attrType)return;const s={ID:e.ID,indices:[],weights:[],transformLink:(new n.yGw).fromArray(i.TransformLink.a)};"Indexes"in i&&(s.indices=i.Indexes.a,s.weights=i.Weights.a),r.push(s)})),{rawBones:r,bones:[]}}parseMorphTargets(e,t){const r=[];for(let n=0;n<e.children.length;n++){const i=e.children[n],s=t[i.ID],o={name:s.attrName,initialWeight:s.DeformPercent,id:s.id,fullWeights:s.FullWeights.a};if("BlendShapeChannel"!==s.attrType)return;o.geoID=V.get(parseInt(i.ID)).children.filter((function(e){return void 0===e.relationship}))[0].ID,r.push(o)}return r}parseScene(e,t,r){G=new n.ZAu;const i=this.parseModels(e.skeletons,t,r),s=z.Objects.Model,o=this;i.forEach((function(e){const t=s[e.ID];o.setLookAtProperties(e,t);V.get(e.ID).parents.forEach((function(t){const r=i.get(t.ID);void 0!==r&&r.add(e)})),null===e.parent&&G.add(e)})),this.bindSkeleton(e.skeletons,t,i),this.addGlobalSceneSettings(),G.traverse((function(e){if(e.userData.transformData){e.parent&&(e.userData.transformData.parentMatrix=e.parent.matrix,e.userData.transformData.parentMatrixWorld=e.parent.matrixWorld);const t=ie(e.userData.transformData);e.applyMatrix4(t),e.updateWorldMatrix()}}));const a=(new W).parse();1===G.children.length&&G.children[0].isGroup&&(G.children[0].animations=a,G=G.children[0]),G.animations=a}parseModels(e,t,r){const i=new Map,s=z.Objects.Model;for(const o in s){const a=parseInt(o),l=s[o],c=V.get(a);let u=this.buildSkeleton(c,e,a,l.attrName);if(!u){switch(l.attrType){case"Camera":u=this.createCamera(c);break;case"Light":u=this.createLight(c);break;case"Mesh":u=this.createMesh(c,t,r);break;case"NurbsCurve":u=this.createCurve(c,t);break;case"LimbNode":case"Root":u=new n.N$j;break;default:u=new n.ZAu}u.name=l.attrName?n.iUV.sanitizeNodeName(l.attrName):"",u.userData.originalName=l.attrName,u.ID=a}this.getTransformData(u,l),i.set(a,u)}return i}buildSkeleton(e,t,r,i){let s=null;return e.parents.forEach((function(e){for(const o in t){const a=t[o];a.rawBones.forEach((function(t,o){if(t.ID===e.ID){const e=s;s=new n.N$j,s.matrixWorld.copy(t.transformLink),s.name=i?n.iUV.sanitizeNodeName(i):"",s.userData.originalName=i,s.ID=r,a.bones[o]=s,null!==e&&s.add(e)}}))}})),s}createCamera(e){let t,r;if(e.children.forEach((function(e){const t=z.Objects.NodeAttribute[e.ID];void 0!==t&&(r=t)})),void 0===r)t=new n.Tme;else{let e=0;void 0!==r.CameraProjectionType&&1===r.CameraProjectionType.value&&(e=1);let i=1;void 0!==r.NearPlane&&(i=r.NearPlane.value/1e3);let s=1e3;void 0!==r.FarPlane&&(s=r.FarPlane.value/1e3);let o=window.innerWidth,a=window.innerHeight;void 0!==r.AspectWidth&&void 0!==r.AspectHeight&&(o=r.AspectWidth.value,a=r.AspectHeight.value);const l=o/a;let c=45;void 0!==r.FieldOfView&&(c=r.FieldOfView.value);const u=r.FocalLength?r.FocalLength.value:null;switch(e){case 0:t=new n.cPb(c,l,i,s),null!==u&&t.setFocalLength(u);break;case 1:t=new n.iKG(-o/2,o/2,a/2,-a/2,i,s);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+e+"."),t=new n.Tme}}return t}createLight(e){let t,r;if(e.children.forEach((function(e){const t=z.Objects.NodeAttribute[e.ID];void 0!==t&&(r=t)})),void 0===r)t=new n.Tme;else{let e;e=void 0===r.LightType?0:r.LightType.value;let i=16777215;void 0!==r.Color&&(i=(new n.Ilk).fromArray(r.Color.value).convertSRGBToLinear());let s=void 0===r.Intensity?1:r.Intensity.value/100;void 0!==r.CastLightOnObject&&0===r.CastLightOnObject.value&&(s=0);let o=0;void 0!==r.FarAttenuationEnd&&(o=void 0!==r.EnableFarAttenuation&&0===r.EnableFarAttenuation.value?0:r.FarAttenuationEnd.value);const a=1;switch(e){case 0:t=new n.cek(i,s,o,a);break;case 1:t=new n.Ox3(i,s);break;case 2:let e=Math.PI/3;void 0!==r.InnerAngle&&(e=n.M8C.degToRad(r.InnerAngle.value));let l=0;void 0!==r.OuterAngle&&(l=n.M8C.degToRad(r.OuterAngle.value),l=Math.max(l,1)),t=new n.PMe(i,s,o,e,l,a);break;default:console.warn("THREE.FBXLoader: Unknown light type "+r.LightType.value+", defaulting to a PointLight."),t=new n.cek(i,s)}void 0!==r.CastShadows&&1===r.CastShadows.value&&(t.castShadow=!0)}return t}createMesh(e,t,r){let i,s=null,o=null;const a=[];return e.children.forEach((function(e){t.has(e.ID)&&(s=t.get(e.ID)),r.has(e.ID)&&a.push(r.get(e.ID))})),a.length>1?o=a:a.length>0?o=a[0]:(o=new n.xoR({name:n.aNw.DEFAULT_MATERIAL_NAME,color:13421772}),a.push(o)),"color"in s.attributes&&a.forEach((function(e){e.vertexColors=!0})),s.FBX_Deformer?(i=new n.TUv(s,o),i.normalizeSkinWeights()):i=new n.Kj0(s,o),i}createCurve(e,t){const r=e.children.reduce((function(e,r){return t.has(r.ID)&&(e=t.get(r.ID)),e}),null),i=new n.nls({name:n.aNw.DEFAULT_MATERIAL_NAME,color:3342591,linewidth:1});return new n.x12(r,i)}getTransformData(e,t){const r={};"InheritType"in t&&(r.inheritType=parseInt(t.InheritType.value)),r.eulerOrder="RotationOrder"in t?se(t.RotationOrder.value):"ZYX","Lcl_Translation"in t&&(r.translation=t.Lcl_Translation.value),"PreRotation"in t&&(r.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(r.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(r.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(r.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(r.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(r.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(r.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(r.rotationPivot=t.RotationPivot.value),e.userData.transformData=r}setLookAtProperties(e,t){if("LookAtProperty"in t){V.get(e.ID).children.forEach((function(t){if("LookAtProperty"===t.relationship){const r=z.Objects.Model[t.ID];if("Lcl_Translation"in r){const t=r.Lcl_Translation.value;void 0!==e.target?(e.target.position.fromArray(t),G.add(e.target)):e.lookAt((new n.Pa4).fromArray(t))}}}))}}bindSkeleton(e,t,r){const i=this.parsePoseNodes();for(const s in e){const o=e[s];V.get(parseInt(o.ID)).parents.forEach((function(e){if(t.has(e.ID)){const t=e.ID;V.get(t).parents.forEach((function(e){if(r.has(e.ID)){r.get(e.ID).bind(new n.OdW(o.bones),i[e.ID])}}))}}))}}parsePoseNodes(){const e={};if("Pose"in z.Objects){const t=z.Objects.Pose;for(const r in t)if("BindPose"===t[r].attrType&&t[r].NbPoseNodes>0){const i=t[r].PoseNode;Array.isArray(i)?i.forEach((function(t){e[t.Node]=(new n.yGw).fromArray(t.Matrix.a)})):e[i.Node]=(new n.yGw).fromArray(i.Matrix.a)}}return e}addGlobalSceneSettings(){if("GlobalSettings"in z){if("AmbientColor"in z.GlobalSettings){const e=z.GlobalSettings.AmbientColor.value,t=e[0],r=e[1],i=e[2];if(0!==t||0!==r||0!==i){const e=new n.Ilk(t,r,i).convertSRGBToLinear();G.add(new n.Mig(e,1))}}"UnitScaleFactor"in z.GlobalSettings&&(G.userData.unitScaleFactor=z.GlobalSettings.UnitScaleFactor.value)}}}class K{constructor(){this.negativeMaterialIndices=!1}parse(e){const t=new Map;if("Geometry"in z.Objects){const r=z.Objects.Geometry;for(const n in r){const i=V.get(parseInt(n)),s=this.parseGeometry(i,r[n],e);t.set(parseInt(n),s)}}return!0===this.negativeMaterialIndices&&console.warn("THREE.FBXLoader: The FBX file contains invalid (negative) material indices. The asset might not render as expected."),t}parseGeometry(e,t,r){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,r);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,r){const n=r.skeletons,i=[],s=e.parents.map((function(e){return z.Objects.Model[e.ID]}));if(0===s.length)return;const o=e.children.reduce((function(e,t){return void 0!==n[t.ID]&&(e=n[t.ID]),e}),null);e.children.forEach((function(e){void 0!==r.morphTargets[e.ID]&&i.push(r.morphTargets[e.ID])}));const a=s[0],l={};"RotationOrder"in a&&(l.eulerOrder=se(a.RotationOrder.value)),"InheritType"in a&&(l.inheritType=parseInt(a.InheritType.value)),"GeometricTranslation"in a&&(l.translation=a.GeometricTranslation.value),"GeometricRotation"in a&&(l.rotation=a.GeometricRotation.value),"GeometricScaling"in a&&(l.scale=a.GeometricScaling.value);const c=ie(l);return this.genGeometry(t,o,i,c)}genGeometry(e,t,r,i){const s=new n.u9r;e.attrName&&(s.name=e.attrName);const o=this.parseGeoNode(e,t),a=this.genBuffers(o),l=new n.a$l(a.vertex,3);if(l.applyMatrix4(i),s.setAttribute("position",l),a.colors.length>0&&s.setAttribute("color",new n.a$l(a.colors,3)),t&&(s.setAttribute("skinIndex",new n.qlB(a.weightsIndices,4)),s.setAttribute("skinWeight",new n.a$l(a.vertexWeights,4)),s.FBX_Deformer=t),a.normal.length>0){const e=(new n.Vkp).getNormalMatrix(i),t=new n.a$l(a.normal,3);t.applyNormalMatrix(e),s.setAttribute("normal",t)}if(a.uvs.forEach((function(e,t){const r=0===t?"uv":`uv${t}`;s.setAttribute(r,new n.a$l(a.uvs[t],2))})),o.material&&"AllSame"!==o.material.mappingType){let e=a.materialIndex[0],t=0;if(a.materialIndex.forEach((function(r,n){r!==e&&(s.addGroup(t,n-t,e),e=r,t=n)})),s.groups.length>0){const t=s.groups[s.groups.length-1],r=t.start+t.count;r!==a.materialIndex.length&&s.addGroup(r,a.materialIndex.length-r,e)}0===s.groups.length&&s.addGroup(0,a.materialIndex.length,a.materialIndex[0])}return this.addMorphTargets(s,e,r,i),s}parseGeoNode(e,t){const r={};if(r.vertexPositions=void 0!==e.Vertices?e.Vertices.a:[],r.vertexIndices=void 0!==e.PolygonVertexIndex?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(r.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(r.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(r.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){r.uv=[];let t=0;for(;e.LayerElementUV[t];)e.LayerElementUV[t].UV&&r.uv.push(this.parseUVs(e.LayerElementUV[t])),t++}return r.weightTable={},null!==t&&(r.skeleton=t,t.rawBones.forEach((function(e,t){e.indices.forEach((function(n,i){void 0===r.weightTable[n]&&(r.weightTable[n]=[]),r.weightTable[n].push({id:t,weight:e.weights[i]})}))}))),r}genBuffers(e){const t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let r=0,n=0,i=!1,s=[],o=[],a=[],l=[],c=[],u=[];const h=this;return e.vertexIndices.forEach((function(p,f){let d,m=!1;p<0&&(p^=-1,m=!0);let v=[],g=[];if(s.push(3*p,3*p+1,3*p+2),e.color){const t=te(f,r,p,e.color);a.push(t[0],t[1],t[2])}if(e.skeleton){if(void 0!==e.weightTable[p]&&e.weightTable[p].forEach((function(e){g.push(e.weight),v.push(e.id)})),g.length>4){i||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),i=!0);const e=[0,0,0,0],t=[0,0,0,0];g.forEach((function(r,n){let i=r,s=v[n];t.forEach((function(t,r,n){if(i>t){n[r]=i,i=t;const o=e[r];e[r]=s,s=o}}))})),v=e,g=t}for(;g.length<4;)g.push(0),v.push(0);for(let e=0;e<4;++e)c.push(g[e]),u.push(v[e])}if(e.normal){const t=te(f,r,p,e.normal);o.push(t[0],t[1],t[2])}e.material&&"AllSame"!==e.material.mappingType&&(d=te(f,r,p,e.material)[0],d<0&&(h.negativeMaterialIndices=!0,d=0)),e.uv&&e.uv.forEach((function(e,t){const n=te(f,r,p,e);void 0===l[t]&&(l[t]=[]),l[t].push(n[0]),l[t].push(n[1])})),n++,m&&(h.genFace(t,e,s,d,o,a,l,c,u,n),r++,n=0,s=[],o=[],a=[],l=[],c=[],u=[])})),t}getNormalNewell(e){const t=new n.Pa4(0,0,0);for(let r=0;r<e.length;r++){const n=e[r],i=e[(r+1)%e.length];t.x+=(n.y-i.y)*(n.z+i.z),t.y+=(n.z-i.z)*(n.x+i.x),t.z+=(n.x-i.x)*(n.y+i.y)}return t.normalize(),t}getNormalTangentAndBitangent(e){const t=this.getNormalNewell(e),r=(Math.abs(t.z)>.5?new n.Pa4(0,1,0):new n.Pa4(0,0,1)).cross(t).normalize(),i=t.clone().cross(r).normalize();return{normal:t,tangent:r,bitangent:i}}flattenVertex(e,t,r){return new n.FM8(e.dot(t),e.dot(r))}genFace(e,t,r,i,s,o,a,l,c,u){let h;if(u>3){const e=[];for(let a=0;a<r.length;a+=3)e.push(new n.Pa4(t.vertexPositions[r[a]],t.vertexPositions[r[a+1]],t.vertexPositions[r[a+2]]));const{tangent:i,bitangent:s}=this.getNormalTangentAndBitangent(e),o=[];for(const t of e)o.push(this.flattenVertex(t,i,s));h=n.iDF.triangulateShape(o,[])}else h=[[0,1,2]];for(const[n,p,f]of h)e.vertex.push(t.vertexPositions[r[3*n]]),e.vertex.push(t.vertexPositions[r[3*n+1]]),e.vertex.push(t.vertexPositions[r[3*n+2]]),e.vertex.push(t.vertexPositions[r[3*p]]),e.vertex.push(t.vertexPositions[r[3*p+1]]),e.vertex.push(t.vertexPositions[r[3*p+2]]),e.vertex.push(t.vertexPositions[r[3*f]]),e.vertex.push(t.vertexPositions[r[3*f+1]]),e.vertex.push(t.vertexPositions[r[3*f+2]]),t.skeleton&&(e.vertexWeights.push(l[4*n]),e.vertexWeights.push(l[4*n+1]),e.vertexWeights.push(l[4*n+2]),e.vertexWeights.push(l[4*n+3]),e.vertexWeights.push(l[4*p]),e.vertexWeights.push(l[4*p+1]),e.vertexWeights.push(l[4*p+2]),e.vertexWeights.push(l[4*p+3]),e.vertexWeights.push(l[4*f]),e.vertexWeights.push(l[4*f+1]),e.vertexWeights.push(l[4*f+2]),e.vertexWeights.push(l[4*f+3]),e.weightsIndices.push(c[4*n]),e.weightsIndices.push(c[4*n+1]),e.weightsIndices.push(c[4*n+2]),e.weightsIndices.push(c[4*n+3]),e.weightsIndices.push(c[4*p]),e.weightsIndices.push(c[4*p+1]),e.weightsIndices.push(c[4*p+2]),e.weightsIndices.push(c[4*p+3]),e.weightsIndices.push(c[4*f]),e.weightsIndices.push(c[4*f+1]),e.weightsIndices.push(c[4*f+2]),e.weightsIndices.push(c[4*f+3])),t.color&&(e.colors.push(o[3*n]),e.colors.push(o[3*n+1]),e.colors.push(o[3*n+2]),e.colors.push(o[3*p]),e.colors.push(o[3*p+1]),e.colors.push(o[3*p+2]),e.colors.push(o[3*f]),e.colors.push(o[3*f+1]),e.colors.push(o[3*f+2])),t.material&&"AllSame"!==t.material.mappingType&&(e.materialIndex.push(i),e.materialIndex.push(i),e.materialIndex.push(i)),t.normal&&(e.normal.push(s[3*n]),e.normal.push(s[3*n+1]),e.normal.push(s[3*n+2]),e.normal.push(s[3*p]),e.normal.push(s[3*p+1]),e.normal.push(s[3*p+2]),e.normal.push(s[3*f]),e.normal.push(s[3*f+1]),e.normal.push(s[3*f+2])),t.uv&&t.uv.forEach((function(t,r){void 0===e.uvs[r]&&(e.uvs[r]=[]),e.uvs[r].push(a[r][2*n]),e.uvs[r].push(a[r][2*n+1]),e.uvs[r].push(a[r][2*p]),e.uvs[r].push(a[r][2*p+1]),e.uvs[r].push(a[r][2*f]),e.uvs[r].push(a[r][2*f+1])}))}addMorphTargets(e,t,r,n){if(0===r.length)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const i=this;r.forEach((function(r){r.rawTargets.forEach((function(r){const s=z.Objects.Geometry[r.geoID];void 0!==s&&i.genMorphGeometry(e,t,s,n,r.name)}))}))}genMorphGeometry(e,t,r,i,s){const o=void 0!==t.PolygonVertexIndex?t.PolygonVertexIndex.a:[],a=void 0!==r.Vertices?r.Vertices.a:[],l=void 0!==r.Indexes?r.Indexes.a:[],c=3*e.attributes.position.count,u=new Float32Array(c);for(let n=0;n<l.length;n++){const e=3*l[n];u[e]=a[3*n],u[e+1]=a[3*n+1],u[e+2]=a[3*n+2]}const h={vertexIndices:o,vertexPositions:u},p=this.genBuffers(h),f=new n.a$l(p.vertex,3);f.name=s||r.attrName,f.applyMatrix4(i),e.morphAttributes.position.push(f)}parseNormals(e){const t=e.MappingInformationType,r=e.ReferenceInformationType,n=e.Normals.a;let i=[];return"IndexToDirect"===r&&("NormalIndex"in e?i=e.NormalIndex.a:"NormalsIndex"in e&&(i=e.NormalsIndex.a)),{dataSize:3,buffer:n,indices:i,mappingType:t,referenceType:r}}parseUVs(e){const t=e.MappingInformationType,r=e.ReferenceInformationType,n=e.UV.a;let i=[];return"IndexToDirect"===r&&(i=e.UVIndex.a),{dataSize:2,buffer:n,indices:i,mappingType:t,referenceType:r}}parseVertexColors(e){const t=e.MappingInformationType,r=e.ReferenceInformationType,i=e.Colors.a;let s=[];"IndexToDirect"===r&&(s=e.ColorIndex.a);for(let o=0,a=new n.Ilk;o<i.length;o+=4)a.fromArray(i,o).convertSRGBToLinear().toArray(i,o);return{dataSize:4,buffer:i,indices:s,mappingType:t,referenceType:r}}parseMaterialIndices(e){const t=e.MappingInformationType,r=e.ReferenceInformationType;if("NoMappingInformation"===t)return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:r};const n=e.Materials.a,i=[];for(let s=0;s<n.length;++s)i.push(s);return{dataSize:1,buffer:n,indices:i,mappingType:t,referenceType:r}}parseNurbsGeometry(e){const t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new n.u9r;const r=t-1,i=e.KnotVector.a,s=[],o=e.Points.a;for(let u=0,h=o.length;u<h;u+=4)s.push((new n.Ltg).fromArray(o,u));let a,l;if("Closed"===e.Form)s.push(s[0]);else if("Periodic"===e.Form){a=r,l=i.length-1-a;for(let e=0;e<r;++e)s.push(s[e])}const c=new B(r,i,s,a,l).getPoints(12*s.length);return(new n.u9r).setFromPoints(c)}}class W{parse(){const e=[],t=this.parseClips();if(void 0!==t)for(const r in t){const n=t[r],i=this.addClip(n);e.push(i)}return e}parseClips(){if(void 0===z.Objects.AnimationCurve)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){const e=z.Objects.AnimationCurveNode,t=new Map;for(const r in e){const n=e[r];if(null!==n.attrName.match(/S|R|T|DeformPercent/)){const e={id:n.id,attr:n.attrName,curves:{}};t.set(e.id,e)}}return t}parseAnimationCurves(e){const t=z.Objects.AnimationCurve;for(const r in t){const n={id:t[r].id,times:t[r].KeyTime.a.map(J),values:t[r].KeyValueFloat.a},i=V.get(n.id);if(void 0!==i){const t=i.parents[0].ID,r=i.parents[0].relationship;r.match(/X/)?e.get(t).curves.x=n:r.match(/Y/)?e.get(t).curves.y=n:r.match(/Z/)?e.get(t).curves.z=n:r.match(/DeformPercent/)&&e.has(t)&&(e.get(t).curves.morph=n)}}}parseAnimationLayers(e){const t=z.Objects.AnimationLayer,r=new Map;for(const i in t){const t=[],s=V.get(parseInt(i));if(void 0!==s){s.children.forEach((function(r,i){if(e.has(r.ID)){const s=e.get(r.ID);if(void 0!==s.curves.x||void 0!==s.curves.y||void 0!==s.curves.z){if(void 0===t[i]){const e=V.get(r.ID).parents.filter((function(e){return void 0!==e.relationship}))[0].ID;if(void 0!==e){const s=z.Objects.Model[e.toString()];if(void 0===s)return void console.warn("THREE.FBXLoader: Encountered a unused curve.",r);const o={modelName:s.attrName?n.iUV.sanitizeNodeName(s.attrName):"",ID:s.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};G.traverse((function(e){e.ID===s.id&&(o.transform=e.matrix,e.userData.transformData&&(o.eulerOrder=e.userData.transformData.eulerOrder))})),o.transform||(o.transform=new n.yGw),"PreRotation"in s&&(o.preRotation=s.PreRotation.value),"PostRotation"in s&&(o.postRotation=s.PostRotation.value),t[i]=o}}t[i]&&(t[i][s.attr]=s)}else if(void 0!==s.curves.morph){if(void 0===t[i]){const e=V.get(r.ID).parents.filter((function(e){return void 0!==e.relationship}))[0].ID,s=V.get(e).parents[0].ID,o=V.get(s).parents[0].ID,a=V.get(o).parents[0].ID,l=z.Objects.Model[a],c={modelName:l.attrName?n.iUV.sanitizeNodeName(l.attrName):"",morphName:z.Objects.Deformer[e].attrName};t[i]=c}t[i][s.attr]=s}}})),r.set(parseInt(i),t)}}return r}parseAnimStacks(e){const t=z.Objects.AnimationStack,r={};for(const n in t){const i=V.get(parseInt(n)).children;i.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const s=e.get(i[0].ID);r[n]={name:t[n].attrName,layer:s}}return r}addClip(e){let t=[];const r=this;return e.layer.forEach((function(e){t=t.concat(r.generateTracks(e))})),new n.m7l(e.name,-1,t)}generateTracks(e){const t=[];let r=new n.Pa4,i=new n.Pa4;if(e.transform&&e.transform.decompose(r,new n._fP,i),r=r.toArray(),i=i.toArray(),void 0!==e.T&&Object.keys(e.T.curves).length>0){const n=this.generateVectorTrack(e.modelName,e.T.curves,r,"position");void 0!==n&&t.push(n)}if(void 0!==e.R&&Object.keys(e.R.curves).length>0){const r=this.generateRotationTrack(e.modelName,e.R.curves,e.preRotation,e.postRotation,e.eulerOrder);void 0!==r&&t.push(r)}if(void 0!==e.S&&Object.keys(e.S.curves).length>0){const r=this.generateVectorTrack(e.modelName,e.S.curves,i,"scale");void 0!==r&&t.push(r)}if(void 0!==e.DeformPercent){const r=this.generateMorphTrack(e);void 0!==r&&t.push(r)}return t}generateVectorTrack(e,t,r,i){const s=this.getTimesForAllAxes(t),o=this.getKeyframeTrackValues(s,t,r);return new n.yC1(e+"."+i,s,o)}generateRotationTrack(e,t,r,i,s){let o,a;if(void 0!==t.x&&void 0!==t.y&&void 0!==t.z){const e=this.interpolateRotations(t.x,t.y,t.z,s);o=e[0],a=e[1]}void 0!==r&&((r=r.map(n.M8C.degToRad)).push(s),r=(new n.USm).fromArray(r),r=(new n._fP).setFromEuler(r)),void 0!==i&&((i=i.map(n.M8C.degToRad)).push(s),i=(new n.USm).fromArray(i),i=(new n._fP).setFromEuler(i).invert());const l=new n._fP,c=new n.USm,u=[];if(!a||!o)return new n.iLg(e+".quaternion",[0],[0]);for(let h=0;h<a.length;h+=3){if(c.set(a[h],a[h+1],a[h+2],s),l.setFromEuler(c),void 0!==r&&l.premultiply(r),void 0!==i&&l.multiply(i),h>2){(new n._fP).fromArray(u,(h-3)/3*4).dot(l)<0&&l.set(-l.x,-l.y,-l.z,-l.w)}l.toArray(u,h/3*4)}return new n.iLg(e+".quaternion",o,u)}generateMorphTrack(e){const t=e.DeformPercent.curves.morph,r=t.values.map((function(e){return e/100})),i=G.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new n.dUE(e.modelName+".morphTargetInfluences["+i+"]",t.times,r)}getTimesForAllAxes(e){let t=[];if(void 0!==e.x&&(t=t.concat(e.x.times)),void 0!==e.y&&(t=t.concat(e.y.times)),void 0!==e.z&&(t=t.concat(e.z.times)),t=t.sort((function(e,t){return e-t})),t.length>1){let e=1,r=t[0];for(let n=1;n<t.length;n++){const i=t[n];i!==r&&(t[e]=i,r=i,e++)}t=t.slice(0,e)}return t}getKeyframeTrackValues(e,t,r){const n=r,i=[];let s=-1,o=-1,a=-1;return e.forEach((function(e){if(t.x&&(s=t.x.times.indexOf(e)),t.y&&(o=t.y.times.indexOf(e)),t.z&&(a=t.z.times.indexOf(e)),-1!==s){const e=t.x.values[s];i.push(e),n[0]=e}else i.push(n[0]);if(-1!==o){const e=t.y.values[o];i.push(e),n[1]=e}else i.push(n[1]);if(-1!==a){const e=t.z.values[a];i.push(e),n[2]=e}else i.push(n[2])})),i}interpolateRotations(e,t,r,i){const s=[],o=[];s.push(e.times[0]),o.push(n.M8C.degToRad(e.values[0])),o.push(n.M8C.degToRad(t.values[0])),o.push(n.M8C.degToRad(r.values[0]));for(let a=1;a<e.values.length;a++){const l=[e.values[a-1],t.values[a-1],r.values[a-1]];if(isNaN(l[0])||isNaN(l[1])||isNaN(l[2]))continue;const c=l.map(n.M8C.degToRad),u=[e.values[a],t.values[a],r.values[a]];if(isNaN(u[0])||isNaN(u[1])||isNaN(u[2]))continue;const h=u.map(n.M8C.degToRad),p=[u[0]-l[0],u[1]-l[1],u[2]-l[2]],f=[Math.abs(p[0]),Math.abs(p[1]),Math.abs(p[2])];if(f[0]>=180||f[1]>=180||f[2]>=180){const t=Math.max(...f)/180,r=new n.USm(...c,i),l=new n.USm(...h,i),u=(new n._fP).setFromEuler(r),p=(new n._fP).setFromEuler(l);u.dot(p)&&p.set(-p.x,-p.y,-p.z,-p.w);const d=e.times[a-1],m=e.times[a]-d,v=new n._fP,g=new n.USm;for(let e=0;e<1;e+=1/t)v.copy(u.clone().slerp(p.clone(),e)),s.push(d+e*m),g.setFromQuaternion(v,i),o.push(g.x),o.push(g.y),o.push(g.z)}else s.push(e.times[a]),o.push(n.M8C.degToRad(e.values[a])),o.push(n.M8C.degToRad(t.values[a])),o.push(n.M8C.degToRad(r.values[a]))}return[s,o]}}class Y{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new Q,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const t=this,r=e.split(/[\r\n]+/);return r.forEach((function(e,n){const i=e.match(/^[\s\t]*;/),s=e.match(/^[\s\t]*$/);if(i||s)return;const o=e.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),a=e.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),l=e.match("^\\t{"+(t.currentIndent-1)+"}}");o?t.parseNodeBegin(e,o):a?t.parseNodeProperty(e,a,r[++n]):l?t.popStack():e.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(e)})),this.allNodes}parseNodeBegin(e,t){const r=t[1].trim().replace(/^"/,"").replace(/"$/,""),n=t[2].split(",").map((function(e){return e.trim().replace(/^"/,"").replace(/"$/,"")})),i={name:r},s=this.parseNodeAttr(n),o=this.getCurrentNode();0===this.currentIndent?this.allNodes.add(r,i):r in o?("PoseNode"===r?o.PoseNode.push(i):void 0!==o[r].id&&(o[r]={},o[r][o[r].id]=o[r]),""!==s.id&&(o[r][s.id]=i)):"number"===typeof s.id?(o[r]={},o[r][s.id]=i):"Properties70"!==r&&(o[r]="PoseNode"===r?[i]:i),"number"===typeof s.id&&(i.id=s.id),""!==s.name&&(i.attrName=s.name),""!==s.type&&(i.attrType=s.type),this.pushStack(i)}parseNodeAttr(e){let t=e[0];""!==e[0]&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let r="",n="";return e.length>1&&(r=e[1].replace(/^(\w+)::/,""),n=e[2]),{id:t,name:r,type:n}}parseNodeProperty(e,t,r){let n=t[1].replace(/^"/,"").replace(/"$/,"").trim(),i=t[2].replace(/^"/,"").replace(/"$/,"").trim();"Content"===n&&","===i&&(i=r.replace(/"/g,"").replace(/,$/,"").trim());const s=this.getCurrentNode();if("Properties70"!==s.name){if("C"===n){const e=i.split(",").slice(1),t=parseInt(e[0]),r=parseInt(e[1]);let o=i.split(",").slice(3);o=o.map((function(e){return e.trim().replace(/^"/,"")})),n="connections",i=[t,r],function(e,t){for(let r=0,n=e.length,i=t.length;r<i;r++,n++)e[n]=t[r]}(i,o),void 0===s[n]&&(s[n]=[])}"Node"===n&&(s.id=i),n in s&&Array.isArray(s[n])?s[n].push(i):"a"!==n?s[n]=i:s.a=i,this.setCurrentProp(s,n),"a"===n&&","!==i.slice(-1)&&(s.a=oe(i))}else this.parseNodeSpecialProperty(e,n,i)}parseNodePropertyContinued(e){const t=this.getCurrentNode();t.a+=e,","!==e.slice(-1)&&(t.a=oe(t.a))}parseNodeSpecialProperty(e,t,r){const n=r.split('",').map((function(e){return e.trim().replace(/^\"/,"").replace(/\s/,"_")})),i=n[0],s=n[1],o=n[2],a=n[3];let l=n[4];switch(s){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":l=parseFloat(l);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":l=oe(l)}this.getPrevNode()[i]={type:s,type2:o,flag:a,value:l},this.setCurrentProp(this.getPrevNode(),i)}}class ${parse(e){const t=new Z(e);t.skip(23);const r=t.getUint32();if(r<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+r);const n=new Q;for(;!this.endOfContent(t);){const e=this.parseNode(t,r);null!==e&&n.add(e.name,e)}return n}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){const r={},n=t>=7500?e.getUint64():e.getUint32(),i=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();const s=e.getUint8(),o=e.getString(s);if(0===n)return null;const a=[];for(let h=0;h<i;h++)a.push(this.parseProperty(e));const l=a.length>0?a[0]:"",c=a.length>1?a[1]:"",u=a.length>2?a[2]:"";for(r.singleProperty=1===i&&e.getOffset()===n;n>e.getOffset();){const n=this.parseNode(e,t);null!==n&&this.parseSubNode(o,r,n)}return r.propertyList=a,"number"===typeof l&&(r.id=l),""!==c&&(r.attrName=c),""!==u&&(r.attrType=u),""!==o&&(r.name=o),r}parseSubNode(e,t,r){if(!0===r.singleProperty){const e=r.propertyList[0];Array.isArray(e)?(t[r.name]=r,r.a=e):t[r.name]=e}else if("Connections"===e&&"C"===r.name){const e=[];r.propertyList.forEach((function(t,r){0!==r&&e.push(t)})),void 0===t.connections&&(t.connections=[]),t.connections.push(e)}else if("Properties70"===r.name){Object.keys(r).forEach((function(e){t[e]=r[e]}))}else if("Properties70"===e&&"P"===r.name){let e=r.propertyList[0],n=r.propertyList[1];const i=r.propertyList[2],s=r.propertyList[3];let o;0===e.indexOf("Lcl ")&&(e=e.replace("Lcl ","Lcl_")),0===n.indexOf("Lcl ")&&(n=n.replace("Lcl ","Lcl_")),o="Color"===n||"ColorRGB"===n||"Vector"===n||"Vector3D"===n||0===n.indexOf("Lcl_")?[r.propertyList[4],r.propertyList[5],r.propertyList[6]]:r.propertyList[4],t[e]={type:n,type2:i,flag:s,value:o}}else void 0===t[r.name]?"number"===typeof r.id?(t[r.name]={},t[r.name][r.id]=r):t[r.name]=r:"PoseNode"===r.name?(Array.isArray(t[r.name])||(t[r.name]=[t[r.name]]),t[r.name].push(r)):void 0===t[r.name][r.id]&&(t[r.name][r.id]=r)}parseProperty(e){const t=e.getString(1);let r;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return r=e.getUint32(),e.getArrayBuffer(r);case"S":return r=e.getUint32(),e.getString(r);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const n=e.getUint32(),i=e.getUint32(),s=e.getUint32();if(0===i)switch(t){case"b":case"c":return e.getBooleanArray(n);case"d":return e.getFloat64Array(n);case"f":return e.getFloat32Array(n);case"i":return e.getInt32Array(n);case"l":return e.getInt64Array(n)}const o=L(new Uint8Array(e.getArrayBuffer(s))),a=new Z(o.buffer);switch(t){case"b":case"c":return a.getBooleanArray(n);case"d":return a.getFloat64Array(n);case"f":return a.getFloat32Array(n);case"i":return a.getInt32Array(n);case"l":return a.getInt64Array(n)}break;default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}}class Z{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=void 0===t||t,this._textDecoder=new TextDecoder}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return 1===(1&this.getUint8())}getBooleanArray(e){const t=[];for(let r=0;r<e;r++)t.push(this.getBoolean());return t}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getInt32());return t}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),2147483648&t?(t=4294967295&~t,e=4294967295&~e,4294967295===e&&(t=t+1&4294967295),e=e+1&4294967295,-(4294967296*t+e)):4294967296*t+e}getInt64Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),4294967296*t+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getFloat32());return t}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getFloat64());return t}getArrayBuffer(e){const t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){const t=this.offset;let r=new Uint8Array(this.dv.buffer,t,e);this.skip(e);const n=r.indexOf(0);return n>=0&&(r=new Uint8Array(this.dv.buffer,t,n)),this._textDecoder.decode(r)}}class Q{add(e,t){this[e]=t}}function q(e){const t=e.match(/FBXVersion: (\d+)/);if(t){return parseInt(t[1])}throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function J(e){return e/46186158e3}const ee=[];function te(e,t,r,n){let i;switch(n.mappingType){case"ByPolygonVertex":i=e;break;case"ByPolygon":i=t;break;case"ByVertice":i=r;break;case"AllSame":i=n.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+n.mappingType)}"IndexToDirect"===n.referenceType&&(i=n.indices[i]);const s=i*n.dataSize,o=s+n.dataSize;return function(e,t,r,n){for(let i=r,s=0;i<n;i++,s++)e[s]=t[i];return e}(ee,n.buffer,s,o)}const re=new n.USm,ne=new n.Pa4;function ie(e){const t=new n.yGw,r=new n.yGw,i=new n.yGw,s=new n.yGw,o=new n.yGw,a=new n.yGw,l=new n.yGw,c=new n.yGw,u=new n.yGw,h=new n.yGw,p=new n.yGw,f=new n.yGw,d=e.inheritType?e.inheritType:0;if(e.translation&&t.setPosition(ne.fromArray(e.translation)),e.preRotation){const t=e.preRotation.map(n.M8C.degToRad);t.push(e.eulerOrder||n.USm.DEFAULT_ORDER),r.makeRotationFromEuler(re.fromArray(t))}if(e.rotation){const t=e.rotation.map(n.M8C.degToRad);t.push(e.eulerOrder||n.USm.DEFAULT_ORDER),i.makeRotationFromEuler(re.fromArray(t))}if(e.postRotation){const t=e.postRotation.map(n.M8C.degToRad);t.push(e.eulerOrder||n.USm.DEFAULT_ORDER),s.makeRotationFromEuler(re.fromArray(t)),s.invert()}e.scale&&o.scale(ne.fromArray(e.scale)),e.scalingOffset&&l.setPosition(ne.fromArray(e.scalingOffset)),e.scalingPivot&&a.setPosition(ne.fromArray(e.scalingPivot)),e.rotationOffset&&c.setPosition(ne.fromArray(e.rotationOffset)),e.rotationPivot&&u.setPosition(ne.fromArray(e.rotationPivot)),e.parentMatrixWorld&&(p.copy(e.parentMatrix),h.copy(e.parentMatrixWorld));const m=r.clone().multiply(i).multiply(s),v=new n.yGw;v.extractRotation(h);const g=new n.yGw;g.copyPosition(h);const y=g.clone().invert().multiply(h),w=v.clone().invert().multiply(y),b=o,_=new n.yGw;if(0===d)_.copy(v).multiply(m).multiply(w).multiply(b);else if(1===d)_.copy(v).multiply(w).multiply(m).multiply(b);else{const e=(new n.yGw).scale((new n.Pa4).setFromMatrixScale(p)).clone().invert(),t=w.clone().multiply(e);_.copy(v).multiply(m).multiply(t).multiply(b)}const x=u.clone().invert(),I=a.clone().invert();let T=t.clone().multiply(c).multiply(u).multiply(r).multiply(i).multiply(s).multiply(x).multiply(l).multiply(a).multiply(o).multiply(I);const S=(new n.yGw).copyPosition(T),E=h.clone().multiply(S);return f.copyPosition(E),T=f.clone().multiply(_),T.premultiply(h.invert()),T}function se(e){const t=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return 6===(e=e||0)?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),t[0]):t[e]}function oe(e){return e.split(",").map((function(e){return parseFloat(e)}))}function ae(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=e.byteLength),(new TextDecoder).decode(new Uint8Array(e,t,r))}},7011:function(e,t,r){"use strict";r.d(t,{L:function(){return v}});var n=r(9477);const i=/^[og]\s*(.+)?/,s=/^mtllib /,o=/^usemtl /,a=/^usemap /,l=/\s+/,c=new n.Pa4,u=new n.Pa4,h=new n.Pa4,p=new n.Pa4,f=new n.Pa4,d=new n.Ilk;function m(){const e={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);const r=this.object&&"function"===typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"===typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(e,t){const r=this._finalize(!1);r&&(r.inherited||r.groupCount<=0)&&this.materials.splice(r.index,1);const n={index:this.materials.length,name:e||"",mtllib:Array.isArray(t)&&t.length>0?t[t.length-1]:"",smooth:void 0!==r?r.smooth:this.smooth,groupStart:void 0!==r?r.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(e){const t={index:"number"===typeof e?e:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return t.clone=this.clone.bind(t),t}};return this.materials.push(n),n},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(e){const t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),e&&this.materials.length>1)for(let r=this.materials.length-1;r>=0;r--)this.materials[r].groupCount<=0&&this.materials.splice(r,1);return e&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}},r&&r.name&&"function"===typeof r.clone){const e=r.clone(0);e.inherited=!0,this.object.materials.push(e)}this.objects.push(this.object)},finalize:function(){this.object&&"function"===typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){const r=parseInt(e,10);return 3*(r>=0?r-1:r+t/3)},parseNormalIndex:function(e,t){const r=parseInt(e,10);return 3*(r>=0?r-1:r+t/3)},parseUVIndex:function(e,t){const r=parseInt(e,10);return 2*(r>=0?r-1:r+t/2)},addVertex:function(e,t,r){const n=this.vertices,i=this.object.geometry.vertices;i.push(n[e+0],n[e+1],n[e+2]),i.push(n[t+0],n[t+1],n[t+2]),i.push(n[r+0],n[r+1],n[r+2])},addVertexPoint:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,r){const n=this.normals,i=this.object.geometry.normals;i.push(n[e+0],n[e+1],n[e+2]),i.push(n[t+0],n[t+1],n[t+2]),i.push(n[r+0],n[r+1],n[r+2])},addFaceNormal:function(e,t,r){const n=this.vertices,i=this.object.geometry.normals;c.fromArray(n,e),u.fromArray(n,t),h.fromArray(n,r),f.subVectors(h,u),p.subVectors(c,u),f.cross(p),f.normalize(),i.push(f.x,f.y,f.z),i.push(f.x,f.y,f.z),i.push(f.x,f.y,f.z)},addColor:function(e,t,r){const n=this.colors,i=this.object.geometry.colors;void 0!==n[e]&&i.push(n[e+0],n[e+1],n[e+2]),void 0!==n[t]&&i.push(n[t+0],n[t+1],n[t+2]),void 0!==n[r]&&i.push(n[r+0],n[r+1],n[r+2])},addUV:function(e,t,r){const n=this.uvs,i=this.object.geometry.uvs;i.push(n[e+0],n[e+1]),i.push(n[t+0],n[t+1]),i.push(n[r+0],n[r+1])},addDefaultUV:function(){const e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){const t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,r,n,i,s,o,a,l){const c=this.vertices.length;let u=this.parseVertexIndex(e,c),h=this.parseVertexIndex(t,c),p=this.parseVertexIndex(r,c);if(this.addVertex(u,h,p),this.addColor(u,h,p),void 0!==o&&""!==o){const e=this.normals.length;u=this.parseNormalIndex(o,e),h=this.parseNormalIndex(a,e),p=this.parseNormalIndex(l,e),this.addNormal(u,h,p)}else this.addFaceNormal(u,h,p);if(void 0!==n&&""!==n){const e=this.uvs.length;u=this.parseUVIndex(n,e),h=this.parseUVIndex(i,e),p=this.parseUVIndex(s,e),this.addUV(u,h,p),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";const t=this.vertices.length;for(let r=0,n=e.length;r<n;r++){const n=this.parseVertexIndex(e[r],t);this.addVertexPoint(n),this.addColor(n)}},addLineGeometry:function(e,t){this.object.geometry.type="Line";const r=this.vertices.length,n=this.uvs.length;for(let i=0,s=e.length;i<s;i++)this.addVertexLine(this.parseVertexIndex(e[i],r));for(let i=0,s=t.length;i<s;i++)this.addUVLine(this.parseUVIndex(t[i],n))}};return e.startObject("",!1),e}class v extends n.aNw{constructor(e){super(e),this.materials=null}load(e,t,r,i){const s=this,o=new n.hH6(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(r){try{t(s.parse(r))}catch(n){i?i(n):console.error(n),s.manager.itemError(e)}}),r,i)}setMaterials(e){return this.materials=e,this}parse(e){const t=new m;-1!==e.indexOf("\r\n")&&(e=e.replace(/\r\n/g,"\n")),-1!==e.indexOf("\\\n")&&(e=e.replace(/\\\n/g,""));const r=e.split("\n");let c=[];for(let n=0,h=r.length;n<h;n++){const e=r[n].trimStart();if(0===e.length)continue;const u=e.charAt(0);if("#"!==u)if("v"===u){const r=e.split(l);switch(r[0]){case"v":t.vertices.push(parseFloat(r[1]),parseFloat(r[2]),parseFloat(r[3])),r.length>=7?(d.setRGB(parseFloat(r[4]),parseFloat(r[5]),parseFloat(r[6])).convertSRGBToLinear(),t.colors.push(d.r,d.g,d.b)):t.colors.push(void 0,void 0,void 0);break;case"vn":t.normals.push(parseFloat(r[1]),parseFloat(r[2]),parseFloat(r[3]));break;case"vt":t.uvs.push(parseFloat(r[1]),parseFloat(r[2]))}}else if("f"===u){const r=e.slice(1).trim().split(l),n=[];for(let e=0,t=r.length;e<t;e++){const t=r[e];if(t.length>0){const e=t.split("/");n.push(e)}}const i=n[0];for(let e=1,s=n.length-1;e<s;e++){const r=n[e],s=n[e+1];t.addFace(i[0],r[0],s[0],i[1],r[1],s[1],i[2],r[2],s[2])}}else if("l"===u){const r=e.substring(1).trim().split(" ");let n=[];const i=[];if(-1===e.indexOf("/"))n=r;else for(let e=0,t=r.length;e<t;e++){const t=r[e].split("/");""!==t[0]&&n.push(t[0]),""!==t[1]&&i.push(t[1])}t.addLineGeometry(n,i)}else if("p"===u){const r=e.slice(1).trim().split(" ");t.addPointGeometry(r)}else if(null!==(c=i.exec(e))){const e=(" "+c[0].slice(1).trim()).slice(1);t.startObject(e)}else if(o.test(e))t.object.startMaterial(e.substring(7).trim(),t.materialLibraries);else if(s.test(e))t.materialLibraries.push(e.substring(7).trim());else if(a.test(e))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if("s"===u){if(c=e.split(" "),c.length>1){const e=c[1].trim().toLowerCase();t.object.smooth="0"!==e&&"off"!==e}else t.object.smooth=!0;const r=t.object.currentMaterial();r&&(r.smooth=t.object.smooth)}else{if("\0"===e)continue;console.warn('THREE.OBJLoader: Unexpected line: "'+e+'"')}}t.finalize();const u=new n.ZAu;u.materialLibraries=[].concat(t.materialLibraries);if(!0===!(1===t.objects.length&&0===t.objects[0].geometry.vertices.length))for(let i=0,s=t.objects.length;i<s;i++){const e=t.objects[i],r=e.geometry,s=e.materials,o="Line"===r.type,a="Points"===r.type;let l=!1;if(0===r.vertices.length)continue;const c=new n.u9r;c.setAttribute("position",new n.a$l(r.vertices,3)),r.normals.length>0&&c.setAttribute("normal",new n.a$l(r.normals,3)),r.colors.length>0&&(l=!0,c.setAttribute("color",new n.a$l(r.colors,3))),!0===r.hasUVIndices&&c.setAttribute("uv",new n.a$l(r.uvs,2));const h=[];for(let i=0,u=s.length;i<u;i++){const e=s[i],r=e.name+"_"+e.smooth+"_"+l;let c=t.materials[r];if(null!==this.materials)if(c=this.materials.create(e.name),!o||!c||c instanceof n.nls){if(a&&c&&!(c instanceof n.UY4)){const e=new n.UY4({size:10,sizeAttenuation:!1});n.F5T.prototype.copy.call(e,c),e.color.copy(c.color),e.map=c.map,c=e}}else{const e=new n.nls;n.F5T.prototype.copy.call(e,c),e.color.copy(c.color),c=e}void 0===c&&(c=o?new n.nls:a?new n.UY4({size:1,sizeAttenuation:!1}):new n.xoR,c.name=e.name,c.flatShading=!e.smooth,c.vertexColors=l,t.materials[r]=c),h.push(c)}let p;if(h.length>1){for(let e=0,t=s.length;e<t;e++){const t=s[e];c.addGroup(t.groupStart,t.groupCount,e)}p=o?new n.ejS(c,h):a?new n.woe(c,h):new n.Kj0(c,h)}else p=o?new n.ejS(c,h[0]):a?new n.woe(c,h[0]):new n.Kj0(c,h[0]);p.name=e.name,u.add(p)}else if(t.vertices.length>0){const e=new n.UY4({size:1,sizeAttenuation:!1}),r=new n.u9r;r.setAttribute("position",new n.a$l(t.vertices,3)),t.colors.length>0&&void 0!==t.colors[0]&&(r.setAttribute("color",new n.a$l(t.colors,3)),e.vertexColors=!0);const i=new n.woe(r,e);u.add(i)}return u}}},4818:function(e,t,r){"use strict";r.d(t,{y:function(){return a}});var n=r(9477),i=r(8304);const s={name:"ConvolutionShader",defines:{KERNEL_SIZE_FLOAT:"25.0",KERNEL_SIZE_INT:"25"},uniforms:{tDiffuse:{value:null},uImageIncrement:{value:new n.FM8(.001953125,0)},cKernel:{value:[]}},vertexShader:"\n\n\t\tuniform vec2 uImageIncrement;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv - ( ( KERNEL_SIZE_FLOAT - 1.0 ) / 2.0 ) * uImageIncrement;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float cKernel[ KERNEL_SIZE_INT ];\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform vec2 uImageIncrement;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec2 imageCoord = vUv;\n\t\t\tvec4 sum = vec4( 0.0, 0.0, 0.0, 0.0 );\n\n\t\t\tfor( int i = 0; i < KERNEL_SIZE_INT; i ++ ) {\n\n\t\t\t\tsum += texture2D( tDiffuse, imageCoord ) * cKernel[ i ];\n\t\t\t\timageCoord += uImageIncrement;\n\n\t\t\t}\n\n\t\t\tgl_FragColor = sum;\n\n\t\t}",buildKernel:function(e){let t=2*Math.ceil(3*e)+1;t>25&&(t=25);const r=.5*(t-1),n=new Array(t);let i=0;for(let s=0;s<t;++s)n[s]=o(s-r,e),i+=n[s];for(let s=0;s<t;++s)n[s]/=i;return n}};function o(e,t){return Math.exp(-e*e/(2*t*t))}class a extends i.w{constructor(e=1,t=25,r=4){super(),this.renderTargetX=new n.dd2(1,1,{type:n.cLu}),this.renderTargetX.texture.name="BloomPass.x",this.renderTargetY=new n.dd2(1,1,{type:n.cLu}),this.renderTargetY.texture.name="BloomPass.y",this.combineUniforms=n.rDY.clone(l.uniforms),this.combineUniforms.strength.value=e,this.materialCombine=new n.jyz({name:l.name,uniforms:this.combineUniforms,vertexShader:l.vertexShader,fragmentShader:l.fragmentShader,blending:n.WMw,transparent:!0});const o=s;this.convolutionUniforms=n.rDY.clone(o.uniforms),this.convolutionUniforms.uImageIncrement.value=a.blurX,this.convolutionUniforms.cKernel.value=s.buildKernel(r),this.materialConvolution=new n.jyz({name:o.name,uniforms:this.convolutionUniforms,vertexShader:o.vertexShader,fragmentShader:o.fragmentShader,defines:{KERNEL_SIZE_FLOAT:t.toFixed(1),KERNEL_SIZE_INT:t.toFixed(0)}}),this.needsSwap=!1,this.fsQuad=new i.T(null)}render(e,t,r,n,i){i&&e.state.buffers.stencil.setTest(!1),this.fsQuad.material=this.materialConvolution,this.convolutionUniforms.tDiffuse.value=r.texture,this.convolutionUniforms.uImageIncrement.value=a.blurX,e.setRenderTarget(this.renderTargetX),e.clear(),this.fsQuad.render(e),this.convolutionUniforms.tDiffuse.value=this.renderTargetX.texture,this.convolutionUniforms.uImageIncrement.value=a.blurY,e.setRenderTarget(this.renderTargetY),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.materialCombine,this.combineUniforms.tDiffuse.value=this.renderTargetY.texture,i&&e.state.buffers.stencil.setTest(!0),e.setRenderTarget(r),this.clear&&e.clear(),this.fsQuad.render(e)}setSize(e,t){this.renderTargetX.setSize(e,t),this.renderTargetY.setSize(e,t)}dispose(){this.renderTargetX.dispose(),this.renderTargetY.dispose(),this.materialCombine.dispose(),this.materialConvolution.dispose(),this.fsQuad.dispose()}}const l={name:"CombineShader",uniforms:{tDiffuse:{value:null},strength:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float strength;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor = strength * texel;\n\n\t\t}"};a.blurX=new n.FM8(.001953125,0),a.blurY=new n.FM8(0,.001953125)},1690:function(e,t,r){"use strict";r.d(t,{x:function(){return c}});var n=r(9477);const i={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor = opacity * texel;\n\n\n\t\t}"};var s=r(7531),o=r(8304);class a extends o.w{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,r){const n=e.getContext(),i=e.state;let s,o;i.buffers.color.setMask(!1),i.buffers.depth.setMask(!1),i.buffers.color.setLocked(!0),i.buffers.depth.setLocked(!0),this.inverse?(s=0,o=1):(s=1,o=0),i.buffers.stencil.setTest(!0),i.buffers.stencil.setOp(n.REPLACE,n.REPLACE,n.REPLACE),i.buffers.stencil.setFunc(n.ALWAYS,s,4294967295),i.buffers.stencil.setClear(o),i.buffers.stencil.setLocked(!0),e.setRenderTarget(r),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),i.buffers.color.setLocked(!1),i.buffers.depth.setLocked(!1),i.buffers.color.setMask(!0),i.buffers.depth.setMask(!0),i.buffers.stencil.setLocked(!1),i.buffers.stencil.setFunc(n.EQUAL,1,4294967295),i.buffers.stencil.setOp(n.KEEP,n.KEEP,n.KEEP),i.buffers.stencil.setLocked(!0)}}class l extends o.w{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class c{constructor(e,t){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),void 0===t){const r=e.getSize(new n.FM8);this._width=r.width,this._height=r.height,(t=new n.dd2(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:n.cLu})).texture.name="EffectComposer.rt1"}else this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new s.T(i),this.copyPass.material.blending=n.jFi,this.clock=new n.SUY}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);-1!==t&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){void 0===e&&(e=this.clock.getDelta());const t=this.renderer.getRenderTarget();let r=!1;for(let n=0,i=this.passes.length;n<i;n++){const t=this.passes[n];if(!1!==t.enabled){if(t.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(n),t.render(this.renderer,this.writeBuffer,this.readBuffer,e,r),t.needsSwap){if(r){const t=this.renderer.getContext(),r=this.renderer.state.buffers.stencil;r.setFunc(t.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),r.setFunc(t.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==a&&(t instanceof a?r=!0:t instanceof l&&(r=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(void 0===e){const t=this.renderer.getSize(new n.FM8);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,(e=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const r=this._width*this._pixelRatio,n=this._height*this._pixelRatio;this.renderTarget1.setSize(r,n),this.renderTarget2.setSize(r,n);for(let i=0;i<this.passes.length;i++)this.passes[i].setSize(r,n)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}},8304:function(e,t,r){"use strict";r.d(t,{T:function(){return l},w:function(){return i}});var n=r(9477);class i{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const s=new n.iKG(-1,1,1,-1,0,1);class o extends n.u9r{constructor(){super(),this.setAttribute("position",new n.a$l([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new n.a$l([0,2,0,0,2,0],2))}}const a=new o;class l{constructor(e){this._mesh=new n.Kj0(a,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,s)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}},4458:function(e,t,r){"use strict";r.d(t,{C:function(){return s}});var n=r(9477),i=r(8304);class s extends i.w{constructor(e,t,r=null,i=null,s=null){super(),this.scene=e,this.camera=t,this.overrideMaterial=r,this.clearColor=i,this.clearAlpha=s,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new n.Ilk}render(e,t,r){const n=e.autoClear;let i,s;e.autoClear=!1,null!==this.overrideMaterial&&(s=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),null!==this.clearColor&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor)),null!==this.clearAlpha&&(i=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),1==this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:r),!0===this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),null!==this.clearColor&&e.setClearColor(this._oldClearColor),null!==this.clearAlpha&&e.setClearAlpha(i),null!==this.overrideMaterial&&(this.scene.overrideMaterial=s),e.autoClear=n}}},7531:function(e,t,r){"use strict";r.d(t,{T:function(){return s}});var n=r(9477),i=r(8304);class s extends i.w{constructor(e,t){super(),this.textureID=void 0!==t?t:"tDiffuse",e instanceof n.jyz?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=n.rDY.clone(e.uniforms),this.material=new n.jyz({name:void 0!==e.name?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new i.T(this.material)}render(e,t,r){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=r.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}},3817:function(e,t,r){"use strict";r.d(t,{U:function(){return n}});const n={name:"FocusShader",uniforms:{tDiffuse:{value:null},screenWidth:{value:1024},screenHeight:{value:1024},sampleDistance:{value:.94},waveFactor:{value:.00125}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float screenWidth;\n\t\tuniform float screenHeight;\n\t\tuniform float sampleDistance;\n\t\tuniform float waveFactor;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 color, org, tmp, add;\n\t\t\tfloat sample_dist, f;\n\t\t\tvec2 vin;\n\t\t\tvec2 uv = vUv;\n\n\t\t\tadd = color = org = texture2D( tDiffuse, uv );\n\n\t\t\tvin = ( uv - vec2( 0.5 ) ) * vec2( 1.4 );\n\t\t\tsample_dist = dot( vin, vin ) * 2.0;\n\n\t\t\tf = ( waveFactor * 100.0 + sample_dist ) * sampleDistance * 4.0;\n\n\t\t\tvec2 sampleSize = vec2(  1.0 / screenWidth, 1.0 / screenHeight ) * vec2( f );\n\n\t\t\tadd += tmp = texture2D( tDiffuse, uv + vec2( 0.111964, 0.993712 ) * sampleSize );\n\t\t\tif( tmp.b < color.b ) color = tmp;\n\n\t\t\tadd += tmp = texture2D( tDiffuse, uv + vec2( 0.846724, 0.532032 ) * sampleSize );\n\t\t\tif( tmp.b < color.b ) color = tmp;\n\n\t\t\tadd += tmp = texture2D( tDiffuse, uv + vec2( 0.943883, -0.330279 ) * sampleSize );\n\t\t\tif( tmp.b < color.b ) color = tmp;\n\n\t\t\tadd += tmp = texture2D( tDiffuse, uv + vec2( 0.330279, -0.943883 ) * sampleSize );\n\t\t\tif( tmp.b < color.b ) color = tmp;\n\n\t\t\tadd += tmp = texture2D( tDiffuse, uv + vec2( -0.532032, -0.846724 ) * sampleSize );\n\t\t\tif( tmp.b < color.b ) color = tmp;\n\n\t\t\tadd += tmp = texture2D( tDiffuse, uv + vec2( -0.993712, -0.111964 ) * sampleSize );\n\t\t\tif( tmp.b < color.b ) color = tmp;\n\n\t\t\tadd += tmp = texture2D( tDiffuse, uv + vec2( -0.707107, 0.707107 ) * sampleSize );\n\t\t\tif( tmp.b < color.b ) color = tmp;\n\n\t\t\tcolor = color * vec4( 2.0 ) - ( add / vec4( 8.0 ) );\n\t\t\tcolor = color + ( add / vec4( 8.0 ) - color ) * ( vec4( 1.0 ) - vec4( sample_dist * 0.5 ) );\n\n\t\t\tgl_FragColor = vec4( color.rgb * color.rgb * vec3( 0.95 ) + color.rgb, 1.0 );\n\n\t\t}"}}}]);